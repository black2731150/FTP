(function(){"use strict";var e={8571:function(e,t,i){var n=i(9242),a=i(3396);function r(e,t){const i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(i)}var o=i(89);const l={},s=(0,o.Z)(l,[["render",r]]);var u=s,c=i(2483),d=i(7139);const h={class:"wrapper"},p={class:"body"},f={key:0},g=["onClick"],m={class:"footer"},w={class:"pagination"},v={class:"search"},b=(0,a._)("span",{style:{"vertical-align":"middle"}}," 搜 索 ",-1);function C(e,t,i,r,o,l){const s=(0,a.up)("el-table-column"),u=(0,a.up)("el-input"),c=(0,a.up)("el-table"),C=(0,a.up)("el-pagination"),z=(0,a.up)("Search"),k=(0,a.up)("el-icon"),y=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",p,[(0,a.Wm)(c,{data:o.fileList,style:{height:"100%"},onCellDblclick:l.handledbClick},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{prop:"Name",label:"文件名","min-width":"55%"}),(0,a.Wm)(s,{prop:"Branch",label:"分支","min-width":"40%"}),(0,a.Wm)(s,{prop:"Size",label:"大小","min-width":"30%"}),(0,a.Wm)(s,{prop:"CreateTime",label:"上传时间","min-width":"50%"}),(0,a.Wm)(s,{label:"描述","min-width":"50%"},{default:(0,a.w5)((e=>[e.row.isEdit?((0,a.wg)(),(0,a.j4)(u,{key:1,modelValue:o.desc,"onUpdate:modelValue":t[0]||(t[0]=e=>o.desc=e),ref:"editInput"+e.$index,onBlur:t=>l.handleInputBlur(e.$index),onKeyup:(0,n.D2)((t=>l.updateDesc(e.row)),["enter"])},null,8,["modelValue","onBlur","onKeyup"])):((0,a.wg)(),(0,a.iD)("span",f,(0,d.zw)(e.row.Text),1))])),_:1}),(0,a.Wm)(s,{prop:"Md5",label:"Md5","min-width":"60%"}),(0,a.Wm)(s,{label:"下载","min-width":"40%"},{default:(0,a.w5)((e=>[(0,a._)("a",{href:":;javascript",onClick:(0,n.iM)((t=>l.handleDLUrl(e.row)),["prevent"])},"下载",8,g)])),_:1})])),_:1},8,["data","onCellDblclick"])]),(0,a._)("div",m,[(0,a._)("div",w,[(0,a.Wm)(C,{"current-page":o.currPage,"onUpdate:currentPage":t[1]||(t[1]=e=>o.currPage=e),"page-size":o.pageSize,"onUpdate:pageSize":t[2]||(t[2]=e=>o.pageSize=e),"page-sizes":[15,20,50,100],layout:"total, prev, pager, next, jumper,sizes",total:o.packagesNum,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,a._)("div",v,[(0,a.Wm)(u,{modelValue:o.searchKW,"onUpdate:modelValue":t[3]||(t[3]=e=>o.searchKW=e),placeholder:"请输入搜索内容",class:"inputBox"},null,8,["modelValue"]),(0,a.Wm)(y,{type:"primary",onClick:l.handleSearch},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z)])),_:1}),b])),_:1},8,["onClick"])])])])}i(7658);var z=i(4161),k=i(2748),y=i(50),S={name:"HomeView",components:{Search:k.olm},data(){return{fileList:[],pageNum:1,currPage:1,pageSize:15,packagesNum:0,searchKW:"",editMode:!1,desc:""}},mounted(){y.Z.el.pagination={pagesize:"条/页",total:"共{total}条",goto:"前往第",pageClassifier:"页"},this.initData()},methods:{initData(){this.fileList=[],(0,z.Z)({method:"get",url:"/getFileInfo",params:{page:this.currPage,size:this.pageSize,search:this.searchKW}}).then((e=>{if(e){const{data:t,total:i,size:n}=e.data;for(let e in t){t[e]["isEdit"]=!1;let i=t[e]["Size"];i=(i/1048576).toFixed(2),t[e]["Size"]=String(i)+"MB",t[e]["index"]=this.fileList.length,t[e]["DownLandURL"]=t[e]["DownLandURL"].substr(1),this.fileList.push(t[e])}0===this.searchKW.length?this.packagesNum=i:this.packagesNum=n,this.pageNum=Math.ceil(this.packagesNum/this.pageSize)}}))},handleDLUrl(e){window.location.href=window.location.href+e.DownLandURL},handleSizeChange(e){this.pageSize=e,this.currPage=1,this.initData()},handleCurrentChange(e){this.currPage=e,this.initData()},handleSearch(){this.initData()},handleInputBlur(e){this.editMode&&(this.fileList[e].isEdit=!1,this.editMode=!1)},handledbClick(e,t){if(!this.editMode&&"描述"===t.label){this.fileList[e.index].isEdit=!0,this.$forceUpdate(),this.desc=e.Text;let t="editInput"+e.index;this.$nextTick((()=>{this.$refs[t].focus()})),this.editMode=!0}},updateDesc(e){0!==this.desc.length?z.Z.post("/update",`name=${e.Name}&text=${this.desc}`).then((e=>{e&&(this.editMode=!1,this.initData())})):this.$message.warning("输入内容不可为空！")}}};const D=(0,o.Z)(S,[["render",C]]);var W=D;const x=[{path:"/",name:"home",component:W}],L=(0,c.p7)({history:(0,c.PO)(""),routes:x});var _=L,M=i(3765);i(4415);(0,n.ri)(u).use(_).use(M.Z,{locale:y.Z}).mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],r=e[c][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],l=n[1],s=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(s)var c=s(i)}for(t&&t(n);u<o.length;u++)r=o[u],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},n=self["webpackChunkdoc_server"]=self["webpackChunkdoc_server"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(8571)}));n=i.O(n)})();